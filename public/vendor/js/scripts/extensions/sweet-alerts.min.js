/*=========================================================================================
	File Name: sweet-alerts.js
	Description: A beautiful replacement for javascript alerts
	----------------------------------------------------------------------------------------
	Item Name: Modern Admin - Responsive Admin Theme
	Version: 1.0
	Author: Pixinvent
	Author URL: hhttp://www.themeforest.net/user/pixinvent
==========================================================================================*/
$(document).ready(function () {

	$('#basic-alert').on('click', function () {
		swal("Here's a message!");
	});

	$('#with-title').on('click', function () {
		swal("Here's a message!", "It's pretty, isn't it?");
	});

	$('#html-alert').on('click', function () {
		var el = document.createElement('span'),
			t = document.createTextNode("Custom HTML Message!!");
		el.style.cssText = 'color:#F6BB42';
		el.appendChild(t);
		swal({
			title: 'HTML Alert!',
			content: {
				element: el,
			}
		});
	});

	$('#type-success').on('click', function () {
		swal("Good job!", "You clicked the button!", "success");
	});

	$('#type-info').on('click', function () {
		swal("Info!", "You clicked the button!", "info");
	});

	$('#type-warning').on('click', function () {
		swal("Warning!", "You clicked the button!", "warning");
	});

	$('#type-error').on('click', function () {
		swal("Error!", "You clicked the button!", "error");
	});

	$('#custom-icon').on('click', function () {
		swal({
			title: "Sweet!",
			text: "Here's a custom image.",
			icon: "../../../app-assets/images/icons/thumbs-up.jpg"
		});
	});

	$('#auto-close').on('click', function () {
		swal({
			title: "Auto close alert!",
			text: "I will close in 2 seconds.",
			timer: 2000,
			showConfirmButton: false
		});
	});

	$('#outside-click').on('click', function () {
		swal({
			title: 'Click outside to close!',
			text: 'This is a cool message!',
			closeOnClickOutside: true
		});
	});

	$('#cancel-button').on('click', function () {
		swal({
				title: "Are you sure?",
				text: "You will not be able to recover this imaginary file!",
				icon: "warning",
				buttons: {
					cancel: {
						text: "No, cancel !",
						value: null,
						visible: true,
						className: "",
						closeModal: false,
					},
					confirm: {
						text: "Yes, delete it!",
						value: true,
						visible: true,
						className: "",
						closeModal: false
					}
				}
			})
			.then((isConfirm) => {
				if (isConfirm) {
					swal("Deleted!", "Your imaginary file has been deleted.", "success");
				} else {
					swal("Cancelled", "Your imaginary file is safe", "error");
				}
			});

	});

	$('#prompt-function').on('click', function () {
		swal("Write something interesting:", {
				content: "input",
			})
			.then((value) => {
				if (value === false) return false;
				if (value === "") {
					swal("You need to write something!", "", "error");
					return false;
				}
				swal(`You typed: ${value}`);
			})

	});

	$('#ajax-request').on('click', function () {
		swal({
				text: 'Search for a movie. e.g. "La La Land".',
				content: "input",
				button: {
					text: "Search!",
					closeModal: false,
				},
			})
			.then(name => {
				if (!name) throw null;

				return fetch(`https://itunes.apple.com/search?term=${name}&entity=movie`);
			})
			.then(results => {
				return results.json();
			})
			.then(json => {
				const movie = json.results[0];

				if (!movie) {
					return swal("No movie was found!");
				}

				const name = movie.trackName;
				const imageURL = movie.artworkUrl100;

				swal({
					title: "Top result:",
					text: name,
					icon: imageURL,
				});
			})
			.catch(err => {
				if (err) {
					swal("Oh noes!", "The AJAX request failed!", "error");
				} else {
					swal.stopLoading();
					swal.close();
				}
			});
	});

	$('#confirm-text').on('click', function () {
		swal({
			title: "Confirm Button Text",
			text: "See the confirm button text! Have you noticed the Change?",
			icon: "warning",
			buttons: {
				cancel: {
					text: "No, cancel !",
					value: null,
					visible: true,
					className: "",
					closeModal: false,
				},
				confirm: {
					text: "Text Changed!!!",
					value: true,
					visible: true,
					className: "",
					closeModal: false
				}
			}
		}).then(isConfirm => {
			if (isConfirm) {
				swal("Changed!", "Confirm button text was changed!!", "success");
			} else {
				swal("Cancelled", "It's safe.", "error");
			}
		});
	});

	$('#confirm-order').on('click', function () {
		swal({
			title: "Place Order?",
			icon: "warning",
			buttons: {
				cancel: {
					text: "No!",
					value: null,
					visible: true,
					className: "",
					closeModal: false,
				},
				confirm: {
					text: "Yes!!!",
					value: true,
					visible: true,
					className: "",
					closeModal: false
				}
			}
		}).then(isConfirm => {
			if (isConfirm) {
				document.getElementById('confirmation-form').submit();
				swal("Order Placed", "You will receive an email shortly!!", "success");
			} else {
				swal("Cancelled", "Order not placed.", "error");
			}
		});
	});

	$('.confirm-color').on('click', function (e) {
		e.preventDefault();
		var id = $(this).data('id');
		var url = $(this).data('url');
		// var name = $(this).data('name');
		swal({
			title: "Are you sure?",
			text: "You will not be able to recover this  item",
			icon: "warning",
			showCancelButton: true,
			buttons: {
				cancel: {
					text: "No, cancel!",
					value: null,
					visible: true,
					className: "btn-warning",
					closeModal: false,
				},
				confirm: {
					text: "Yes, delete!",
					value: true,
					visible: true,
					className: "",
					closeModal: false
				}
			}
		}).then(isConfirm => {
			if (isConfirm) {
				$.ajaxSetup({
					headers: {
						'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
					}
				});
				$.ajax({
					type: "DELETE",
					url: url + id,
					dataType: "JSON",
					success: function (data) {
						swal("Deleted!", name + ": " + data.name + " has been deleted.", "success");
						// window.location.reload();
					}
				});

			} else {
				swal("Cancelled", "Your record is safe", "error");
			}
		});
	});

	//featured image

	$('.confirm-featured').on('click', function (e) {
		e.preventDefault();
		var id = $(this).data('id');
		var url = $(this).data('url');
		var name = $(this).data('name');
		swal({
			title: "Are you sure?",
			text: "Your Product Will be Featured ",
			icon: "warning",
			showCancelButton: true,
			buttons: {
				cancel: {
					text: "No, cancel!",
					value: null,
					visible: true,
					className: "btn-warning",
					closeModal: false,
				},
				confirm: {
					text: "Yes, feature it!",
					value: true,
					visible: true,
					className: "",
					closeModal: false
				}
			}
		}).then(isConfirm => {
			if (isConfirm) {

				$.ajax({
					type: "GET",
					url: "/manage/make_featured/" + id,
					dataType: "JSON",
					success: function (data) {
						swal("Featured!", "Product: " + data.name + " has been Featured.", "success");
						// window.location.reload();
					}
				});

			} else {
				swal("Cancelled", "Your Product is not featured", "error");
			}
		});
	});

	//remove featured

	$('.remove-featured').on('click', function (e) {
		e.preventDefault();
		var id = $(this).data('id');
		var url = $(this).data('url');
		var name = $(this).data('name');
		swal({
			title: "Are you sure?",
			text: "Your Product Will be Unfeatured",
			icon: "warning",
			showCancelButton: true,
			buttons: {
				cancel: {
					text: "No, cancel!",
					value: null,
					visible: true,
					className: "btn-warning",
					closeModal: false,
				},
				confirm: {
					text: "Yes, unfeature it!",
					value: true,
					visible: true,
					className: "",
					closeModal: false
				}
			}
		}).then(isConfirm => {
			if (isConfirm) {

				$.ajax({
					type: "GET",
					url: "/manage/remove_featured/" + id,
					dataType: "JSON",
					success: function (data) {
						swal("Unfeatured!", "Product: " + data.name + " has been unfeatured.", "success");
						// window.location.reload();
					}
				});

			} else {
				swal("Cancelled", "Your Product is still featured", "error");
			}
		});
	});

	$('.make-out-stock').on('click', function (e) {
		e.preventDefault();
		var id = $(this).data('id');
		var url = $(this).data('url');
		var name = $(this).data('name');
		swal({
			title: "Are you sure?",
			text: "Your Product Wont Show on The Website",
			icon: "warning",
			showCancelButton: true,
			buttons: {
				cancel: {
					text: "No, cancel!",
					value: null,
					visible: true,
					className: "btn-warning",
					closeModal: false,
				},
				confirm: {
					text: "Yes, Remove it!",
					value: true,
					visible: true,
					className: "",
					closeModal: false
				}
			}
		}).then(isConfirm => {
			if (isConfirm) {

				$.ajax({
					type: "GET",
					url: "/manage/make_out_stock/" + id,
					dataType: "JSON",
					success: function (data) {
						swal("Out Stocked!", "Product: " + data.name + " has been removed.", "success");
						// window.location.reload();
					}
				});

			} else {
				swal("Cancelled", "Your Product is still visible", "error");
			}
		});
	});

	//stock in
	$('.stock-in').on('click', function (e) {
		e.preventDefault();
		var id = $(this).data('id');
		var url = $(this).data('url');
		var name = $(this).data('name');
		swal({
			title: "Are you sure?",
			text: "Your Product Will Show on The Website",
			icon: "warning",
			showCancelButton: true,
			buttons: {
				cancel: {
					text: "No, cancel!",
					value: null,
					visible: true,
					className: "btn-warning",
					closeModal: false,
				},
				confirm: {
					text: "Yes, Show it!",
					value: true,
					visible: true,
					className: "",
					closeModal: false
				}
			}
		}).then(isConfirm => {
			if (isConfirm) {

				$.ajax({
					type: "GET",
					url: "/manage/remove_out_stock/" + id,
					dataType: "JSON",
					success: function (data) {
						swal("Stocked In!", "Product: " + data.name + " has been added.", "success");
						// window.location.reload();
					}
				});

			} else {
				swal("Cancelled", "Your Product is still Out stocked", "error");
			}
		});
	});
	//add category on a fly

	$('#add_category').on('click', function (e) {
		e.preventDefault();
		// var id = $(this).data('id');
		// var url = $(this).data('url');
		// var name = $(this).data('name');
		swal({
			title: "Add Category",
			content: "input",
			showCancelButton: true,
			buttons: {
				// cancel: {
				// 	text: "Cancel",
				// 	value: null,
				// 	visible: true,
				// 	className: "btn-warning",
				// 	closeModal: false,
				// },
				confirm: {
					text: "Save!",
					value: true,
					visible: true,
					className: "",
					closeModal: false
				}
			}
		}).then(name => {
			if (!name) throw null;

			$.ajaxSetup({
				headers: {
					'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
				}
			});
			$.ajax({
				type: "POST",
				url: "/manage/add_category",
				dataType: "JSON",
				data: {
					name: name
				},
				success: function (data) {
					swal("Category ", " Added!.", "success");
					// window.location.reload();
					$("#category_output").text(data.category_name);
					$('select[name="category_id"]').empty().append(data.categories);

					// $.each(data, function (key, value) {

					// 	$('select[name="category_id"]').append(
					// 		'<option  value="' + key + '">' + value +
					// 		'</option>');

					// });
				}
			});

		})
	});

	//delete category

	// $('.confirm-color').on('click', function (e) {
	// 	e.preventDefault();
	// 	var id = $(this).data('id');
	// 	swal({
	// 		title: "Are you sure!",
	// 		type: "error",
	// 		confirmButtonClass: "btn-danger",
	// 		confirmButtonText: "Yes!",
	// 		showCancelButton: true,
	// 	},
	// 		function () {
	// 			$.ajaxSetup({
	// 				headers: {
	// 					'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
	// 				}
	// 			});
	// 			$.ajax({
	// 				type: "DELETE",
	// 				url: "categories/ ",
	// 				data: { id: id },
	// 				success: function (data) {
	// 					console.log(response);
	// 				}
	// 			});
	// 		});
	// });

	$('.confirm-color-stock-out').on('click', function () {
		swal({
			title: "Are you sure?",
			text: "Your Product Wont Show On The Website",
			icon: "warning",
			showCancelButton: true,
			buttons: {
				cancel: {
					text: "No, cancel !",
					value: null,
					visible: true,
					className: "btn-warning",
					closeModal: false,
				},
				confirm: {
					text: "Yes, Remove it!",
					value: true,
					visible: true,
					className: "",
					closeModal: false
				}
			}
		}).then(isConfirm => {
			if (isConfirm) {
				swal("Out Stocked!", "Record has been Out Stocked.", "success");
			} else {
				swal("Cancelled", "Your record is not removed", "error");
			}
		});
	});

	$('.confirm-color-stock-in').on('click', function () {
		swal({
			title: "Are you sure?",
			text: "Your Product Will Show On The Website",
			icon: "warning",
			showCancelButton: true,
			buttons: {
				cancel: {
					text: "No, cancel!",
					value: null,
					visible: true,
					className: "btn-warning",
					closeModal: false,
				},
				confirm: {
					text: "Yes, Show it!",
					value: true,
					visible: true,
					className: "",
					closeModal: false
				}
			}
		}).then(isConfirm => {
			if (isConfirm) {
				swal("Stocked In!", "Record has been added.", "success");
			} else {
				swal("Cancelled", "Your record is not shown", "error");
			}
		});
	});

	$('.cancel-order').on('click', function () {
		var id = $(this).data('id');
		swal({
			title: "Are you sure?",
			text: "Your Order Will be Cancelled",
			icon: "warning",
			showCancelButton: true,
			buttons: {
				cancel: {
					text: "No, Dont Cancel!",
					value: null,
					visible: true,
					className: "btn-warning",
					closeModal: false,
				},
				confirm: {
					text: "Yes, Cancel it!",
					value: true,
					visible: true,
					className: "",
					closeModal: false
				}
			}
		}).then(isConfirm => {
			if (isConfirm) {

				$.ajaxSetup({
					headers: {
						'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
					}
				});

				$.ajax({
					type: "PUT",
					url: "/manage/cancel_order/" + id,
					dataType: "JSON",
					success: function (data) {
						swal("Success!", "Order has been cancelled", "success");
						// window.location.reload();
					}
				});

				 $('.order-'+id).text('Canclelled').removeClass('badge-warning badge-success').addClass('badge-danger');
				 $('#cancel-'+id).remove();

			} else {
				swal("Not Cancelled!", "Order Not Cancelled", "error");
			}
		});
	});

	function success(params) {
		swal("Success!", "{{ Session::get('success') }}", "success");
	}

});